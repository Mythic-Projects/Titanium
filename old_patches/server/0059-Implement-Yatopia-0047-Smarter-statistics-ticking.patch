From 949298e6a6e53e2749ab1247b4098a7ab0c022e9 Mon Sep 17 00:00:00 2001
From: Peridot <peridot491@protonmail.com>
Date: Thu, 12 May 2022 11:27:50 +0200
Subject: [PATCH] Implement [Yatopia-0047] Smarter statistics ticking


diff --git a/src/main/java/net/minecraft/server/EntityHuman.java b/src/main/java/net/minecraft/server/EntityHuman.java
index 8d632231..e51cb96e 100644
--- a/src/main/java/net/minecraft/server/EntityHuman.java
+++ b/src/main/java/net/minecraft/server/EntityHuman.java
@@ -1376,8 +1376,10 @@ public abstract class EntityHuman extends EntityLiving {
 
     }
 
+    private final int interval = TitaniumConfig.get().playerTimeStatisticsInterval;
+
     public void b(Statistic statistic) {
-        this.a(statistic, 1);
+        this.a(statistic, interval);
     }
 
     public void a(Statistic statistic, int i) {}
diff --git a/src/main/java/net/titanium/config/TitaniumConfig.java b/src/main/java/net/titanium/config/TitaniumConfig.java
index ebd01683..8bf00dfa 100644
--- a/src/main/java/net/titanium/config/TitaniumConfig.java
+++ b/src/main/java/net/titanium/config/TitaniumConfig.java
@@ -70,6 +70,9 @@ public class TitaniumConfig extends OkaeriConfig {
 
     }
 
+    //TODO comment this
+    public int playerTimeStatisticsInterval = 20;
+
     @Comment("The max NBT size in bytes. The default value is 2097152 which is ~2Mb - it's insane big.")
     @Comment("We are setting this to 50000 which is only ~0.05MB. That's enough in most cases.")
     @Comment("Smaller values (Our 50000 is probably enough, but smaller value would be even better) prevents most NBT related overflow exploits (for eg. Books)")
-- 
2.36.0.windows.1

